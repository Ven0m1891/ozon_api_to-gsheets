# Остатки и цены товаров на Ozon

Этот проект предназначен для автоматизации процесса получения данных об остатках и ценах товаров на маркетплейсе Ozon и записи этих данных в Google Таблицы. Проект использует API Ozon Seller для получения данных и Google Sheets API для записи данных в таблицы.

## Описание

Проект состоит из нескольких основных функций:

1. **Получение списка товаров**: Функция `get_items` получает список товаров, которые находятся в продаже на Ozon.
2. **Получение остатков товаров**: Функция `get_remains` получает данные об остатках товаров на складах.
3. **Получение цен товаров**: Функция `get_price` получает данные о ценах товаров, включая реальную цену и цену с СПП.
4. **Запись данных в Google Таблицы**: Функция `gsheets_output` записывает полученные данные в указанные Google Таблицы.
5. **Основная функция**: Функция `remains_price` объединяет все вышеперечисленные функции и выполняет их для каждого проекта, указанного в конфигурационном файле.

## Конфигурация

Для работы проекта необходимо настроить два конфигурационных файла:

### `tg_config.json`

Этот файл содержит настройки для отправки уведомлений в Telegram:

```json
{
    "token": "1234567890:AABBcCdDEeFFGG1HHiiiJj12345678",
    "chat_id": 1234567
}
```

- **token**: Токен вашего Telegram бота.
- **chat_id**: ID чата, в который будут отправляться уведомления.

### `config.json`

Этот файл содержит настройки для работы с Google Таблицами и API Ozon:

```json
{
    "ik_1": {
        "google_account": "Имя файла с данными сервисного аккаунта гугл",
        "sheet": "Индентификатор гугл таблицы",
        "worksheet": "имя листа в гугл таблице"
    },
    "ik_2": {
        "google_account": "Имя файла с данными сервисного аккаунта гугл",
        "sheet": "Индентификатор гугл таблицы",
        "worksheet": "имя листа в гугл таблице"
    },
    "project1": {
        "head": {
            "Client-Id": "xxxxxxx",
            "Api-Key": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
        },
        "project": "ИП Иванов"
    },
    "project2": {
        "head": {
            "Client-Id": "xxxxxxx",
            "Api-Key": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
        },
        "project": "ИП Петров"
    }
}
```

- **ik_1**, **ik_2**: Настройки для Google Таблиц, включая файл сервисного аккаунта, идентификатор таблицы и имя листа.
- **project1**, **project2**: Настройки для проектов, включая API-ключи и имя проекта.

## Установка и запуск

1. Убедитесь, что у вас установлен Python 3.x.
2. Установите необходимые зависимости:

   ```bash
   pip install gspread requests pytz
   ```

3. Настройте конфигурационные файлы `tg_config.json` и `config.json` в соответствии с вашими данными.
4. Запустите скрипт:

   ```bash
   python remains_price.py
   ```

## Логирование ошибок

В случае возникновения ошибок, они будут записаны в лог-файлы с именами, соответствующими именам проектов (например, `ИП Иванов.txt`). Также ошибки будут отправлены в Telegram, если настроен `tg_config.json`.

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности см. в файле [LICENSE](LICENSE).
